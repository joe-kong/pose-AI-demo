# 姿勢検出アプリ

これはAndroidデバイスでMediaPipe Pose Landmarkerを使用してリハビリ運動姿勢を検出するデモアプリです。ユーザーの姿勢を監視し、正しい姿勢を保持しているときにタイマーを進行させます。

## 機能

- MediaPipe Tasksを使用してリアルタイムポーズ検出
- 左足・右足のハムストリングストレッチ姿勢を検出
- 正しい姿勢を検出すると30秒カウントダウンを開始
- 姿勢が崩れるとタイマーを一時停止し、正しい姿勢に戻ると再開
- 左右各30秒のストレッチを1セットとし、計3セット行う

## セットアップ手順

### 1. プロジェクトを開く

1. このリポジトリをクローンまたはダウンロードします
2. Android Studioでプロジェクトを開きます
3. Android Studioが必要なGradleファイルの同期を行います
4. MediaPipeモデルファイルが正しくダウンロードされていることを確認します

### 2. デバイスでアプリを実行する

1. USBケーブルでAndroidデバイスをコンピュータに接続するか、エミュレータを設定します
2. Android Studioの「実行」ボタンをクリックします
3. アプリが起動し、カメラのアクセス許可を求められます
4. 許可を与えると、ストレッチ検出が開始できる状態になります

## MediaPipeモデルファイルについて

このアプリではMediaPipe Pose Landmarkerモデルを使用しています。モデルファイルは以下の場所に配置されています：

```
app/src/main/assets/pose_landmarker_full.task
```

このファイルがない場合は、以下のコマンドでダウンロードできます：

```bash
curl -o app/src/main/assets/pose_landmarker_full.task https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_full/float16/latest/pose_landmarker_full.task
```

## 使い方

1. アプリを起動し、カメラのアクセス許可を与えます
2. 「開始」ボタンをタップして検出を開始します
3. カメラに体全体が映るように配置します
4. 指示に従って左足を前に出し体を前傾する姿勢を取ります
5. 正しい姿勢が検出されると自動的にタイマーが開始されます
6. 30秒経過すると右足に切り替わります
7. 3セット完了するまで繰り返します

## 技術的な詳細

- 言語: Kotlin
- フレームワーク: Jetpack Compose
- 姿勢検出: MediaPipe Tasks Pose Landmarker API
- カメラ: CameraX API

## 注意点

- このアプリは姿勢検出のデモであり、医学的なアドバイスを提供するものではありません
- 検出精度はデバイスの性能やカメラ環境により異なります
- ストレッチを行う際は無理のない範囲で行ってください

## トラブルシューティング

- ビルドエラーが発生した場合は、Android StudioでGradleの同期を行ってください
- カメラが起動しない場合は、アプリの権限設定を確認してください
- MediaPipeモデルが読み込めない場合は、assets/ディレクトリに正しく配置されているか確認してください 